maze1 = [['+', '-', '+', '-', '+', '-', '+'],
['|', ' ', ' ', ' ', ' ', ' ', '|'],
['+', ' ', '+', '-', '+', ' ', '+'],
['|', ' ', ' ', 'F', '|', ' ', '|'],
['+', '-', '+', '-', '+', ' ', '+'],
['|', '$', ' ', ' ', ' ', ' ', '|'],
['+', '-', '+', '-', '+', '-', '+']]

maze2 = [
["+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+"],
["|", " ", " ", " ", " ", " ", "|", " ", " ", " ", " ", " ", "|", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "|"],
["+", " ", "+", "-", "+", " ", "+", " ", "+", "-", "+", "-", "+", " ", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", " ", "+", "-", "+", "-", "+", "-", "+", " ", "+"],
["|", " ", " ", " ", "|", " ", " ", " ", "|", " ", " ", " ", " ", " ", "|", " ", " ", " ", "|", " ", " ", " ", "|", " ", " ", " ", " ", " ", " ", " ", " ", " ", "|", " ", " ", " ", "|", " ", " ", " ", " ", " ", "|"],
["+", "-", "+", " ", "+", " ", "+", "-", "+", " ", "+", "-", "+", "-", "+", " ", "+", " ", "+", " ", "+", " ", "+", " ", "+", "-", "+", "-", "+", "-", "+", " ", "+", "-", "+", " ", "+", " ", "+", "-", "+", "-", "+"],
["|", " ", " ", " ", "|", " ", "|", " ", " ", " ", "|", " ", " ", " ", " ", " ", "|", " ", " ", " ", "|", " ", "|", " ", " ", " ", " ", " ", "|", " ", "|", " ", "|", " ", " ", " ", "|", " ", " ", " ", "|", " ", "|"],
["+", " ", "+", "-", "+", " ", "+", " ", "+", "-", "+", " ", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", " ", "+", "-", "+", "-", "+", " ", "+", "-", "+", "-", "+", "-", "+", " ", "+", "-", "+"],
["|", " ", "|", " ", " ", " ", "|", " ", "|", " ", "|", " ", "|", " ", " ", " ", " ", " ", " ", " ", " ", " ", "|", " ", "|", " ", "|", " ", " ", " ", "|", " ", " ", " ", " ", " ", "|", " ", "|", " ", " ", " ", "|"],
["+", " ", "+", "-", "+", "-", "+", " ", "+", "-", "+", " ", "+", " ", "+", "-", "+", "-", "+", "-", "+", " ", "+", " ", "+", " ", "+", " ", "+", " ", "+", "-", "+", " ", "+", " ", "+", "-", "+", "-", "+", " ", "+"],
["|", " ", " ", " ", " ", " ", "|", " ", "|", " ", " ", " ", "|", " ", " ", " ", "|", " ", " ", " ", "|", " ", "|", " ", "|", " ", " ", " ", "|", " ", " ", " ", "|", " ", "|", " ", " ", " ", " ", " ", " ", " ", "|"],
["+", " ", "+", "-", "+", " ", "+", " ", "+", " ", "+", "-", "+", "-", "+", " ", "+", "-", "+", " ", "+", " ", "+", "-", "+", "-", "+", "-", "+", "-", "+", " ", "+", " ", "+", "-", "+", "-", "+", "-", "+", "-", "+"],
["|", " ", "|", " ", " ", " ", "|", " ", "|", " ", " ", " ", " ", " ", "|", " ", " ", " ", "|", " ", "|", " ", " ", " ", " ", " ", " ", " ", " ", " ", "|", " ", "|", " ", " ", " ", " ", " ", " ", " ", "|", " ", "|"],
["+", " ", "+", " ", "+", "-", "+", " ", "+", "-", "+", "-", "+", "-", "+", "-", "+", " ", "+", " ", "+", "-", "+", "-", "+", "-", "+", "-", "+", " ", "+", " ", "+", "-", "+", " ", "+", "-", "+", " ", "+", "-", "+"],
["|", " ", "|", " ", "|", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "|", " ", " ", " ", " ", " ", " ", " ", " ", " ", "|", " ", "|", " ", " ", " ", "|", " ", "|", " ", "|", " ", " ", " ", "|"],
["+", " ", "+", " ", "+", " ", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", " ", "+", "-", "+", "-", "+", " ", "+", " ", "+", "-", "+", " ", "+", " ", "+", " ", "+", "-", "+", " ", "+"],
["|", " ", "|", " ", " ", " ", " ", " ", "|", " ", " ", " ", "|", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "|", " ", "|", " ", " ", " ", "|", " ", "|", " ", " ", " ", "|", " ", " ", " ", "|"],
["+", " ", "+", "-", "+", "-", "+", " ", "+", " ", "+", " ", "+", " ", "+", "-", "+", " ", "+", "-", "+", "-", "+", " ", "+", "-", "+", "-", "+", " ", "+", " ", "+", " ", "+", "-", "+", " ", "+", " ", "+", "-", "+"],
["|", " ", "|", " ", " ", " ", " ", " ", "|", " ", "|", " ", "|", " ", " ", " ", "|", " ", " ", " ", " ", " ", "|", " ", "|", " ", " ", " ", " ", " ", "|", " ", "|", " ", "|", " ", "|", " ", "|", " ", " ", " ", "|"],
["+", " ", "+", " ", "+", "-", "+", "-", "+", " ", "+", " ", "+", "-", "+", " ", "+", " ", "+", "-", "+", "-", "+", "-", "+", " ", "+", "-", "+", "-", "+", "-", "+", " ", "+", " ", "+", " ", "+", "-", "+", " ", "+"],
["|", " ", "|", " ", "|", " ", " ", " ", " ", " ", "|", " ", " ", " ", "|", " ", "|", " ", " ", " ", "|", " ", " ", " ", "|", " ", " ", " ", " ", " ", " ", " ", "|", " ", "|", " ", " ", " ", "|", " ", "|", " ", "|"],
["+", " ", "+", " ", "+", " ", "+", "-", "+", "-", "+", "-", "+", "-", "+", " ", "+", "-", "+", " ", "+", " ", "+", "-", "+", "-", "+", "-", "+", "-", "+", " ", "+", " ", "+", "-", "+", "-", "+", "-", "+", " ", "+"],
["|", " ", "|", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "|", " ", "|", " ", " ", " ", "|", " ", "|", " ", "|", " ", " ", " ", "|", " ", " ", " ", " ", " ", "|", " ", "|", " ", "|"],
["+", " ", "+", " ", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", " ", "+", "-", "+", "-", "+", " ", "+", "-", "+", "-", "+", "-", "+", " ", "+", "-", "+", " ", "+"],
["|", " ", "|", " ", " ", " ", " ", " ", "|", " ", " ", " ", "|", " ", "|", " ", " ", " ", " ", " ", "|", " ", "|", " ", "|", " ", "|", " ", " ", " ", " ", " ", " ", " ", " ", " ", "|", " ", "|", " ", " ", " ", "|"],
["+", "-", "+", "-", "+", "-", "+", " ", "+", " ", "+", " ", "+", " ", "+", " ", "+", "-", "+", " ", "+", "-", "+", " ", "+", "-", "+", " ", "+", "-", "+", " ", "+", "-", "+", "-", "+", " ", "+", " ", "+", "-", "+"],
["|", " ", " ", " ", "|", " ", " ", " ", "|", " ", "|", " ", "|", " ", "|", " ", "|", " ", "|", " ", " ", " ", " ", " ", "|", " ", "|", " ", "|", " ", " ", " ", "|", " ", " ", " ", "|", " ", "|", " ", " ", " ", "|"],
["+", " ", "+", "-", "+", " ", "+", "-", "+", " ", "+", " ", "+", " ", "+", " ", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", " ", "+", " ", "+", "-", "+", " ", "+", " ", "+", " ", "+", "-", "+", "-", "+"],
["|", " ", " ", " ", " ", " ", " ", " ", "|", " ", "|", " ", "|", " ", "|", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "|", " ", "|", " ", "|", " ", " ", " ", "|", " ", "|", " ", " ", " ", " ", " ", "|"],
["+", "-", "+", "-", "+", "-", "+", " ", "+", "-", "+", " ", "+", " ", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", " ", "+", " ", "+", " ", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", " ", "+"],
["|", "$", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "|", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "|", " ", " ", " ", "|", " ", " ", " ", " ", " ", " ", " ", " ", " ", "|", " ", " ", " ", "F"],
["+", "-", "-", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+", "-", "+"]
]

exec("maze = " + input("maze?\n"))

point_options = {}

for y, row in enumerate(maze):
    for x, column in enumerate(row):
        if maze[y][x] == "$":
            starting_point = (x, y)

considered_points = set()
def find_food(point):
    considered_points.add(point)

    point_weights = []
    for x_offset, y_offset, action in [(0, -1, "up"), (1, 0, "right"), (0, 1, "down"), (-1, 0, "left")]:

        x_value, y_value = point[0]+x_offset, point[1]+y_offset
        item = maze[y_value][x_value]
        searchable_point = (x_value, y_value)

        if item == "F": return (1, action)
        if (item != " "): continue

        if ( searchable_point in considered_points ):
            point_weights.append( (float("inf"), "NONE") )
        else:
            weight, paths = find_food(searchable_point)
            point_weights.append((weight+1, action + " " + paths ))
    return min(point_weights, key=lambda x: x[0])

result = find_food(starting_point)
print(result[1].replace(" ", ", "))
